## 项目概览
- 无需服务器与域名；使用 Vercel 托管前后端，一键上线。
- 数据由 Supabase 承载，仅保存账号、助手配置与少量会话信息；不保存消息文本。
- Dify 提供对话与历史；所有调用经后端代理，确保密钥安全。

## 界面与交互
- 登录页：账号/密码登录；成功后进入主页面；支持退出登录。
- 主页面（三栏）：
  - 左栏：助手列表（无标题），支持搜索与选中高亮。
  - 中栏：当前助手的会话列表，支持新建、重命名、删除、搜索。
  - 右栏：对话内容区，消息流式显示；输入框下有“高级选项”折叠区（每助手仅 1–2 参数）。
- 不单独做“历史页”；历史在右栏分页滚动加载。

## 账号与权限
- 由你手动在数据库创建 5 个测试账号；不做注册流程。
- 每个账号生成只读短 ID（`dify_user_id`），后端所有 Dify 调用用此值作为 `user`。
- 普通用户仅登录与对话；账号增改仅由你在数据库控制台操作。

## 助手与参数（每助手 1–2 项）
- 参数在数据库里定义：键名、类型、文案、默认值、是否必填；前端只渲染这 1–2 项。
- 同名变量需在 Dify 助手里声明并在提示词/流程中使用；未使用的键不会生效。
- 示例（可改名）：
  1) IP定位顾问：`persona`（文本，必填）、`audience`（文本，选填）
  2) 人设脚本助手：`tone`（单选：专业/故事化/幽默，默认专业）、`duration`（单选：30s/60s，默认60s）
  3) 选题雷达：`platform`（单选：抖音/快手/视频号/小红书，默认抖音）、`industry`（文本）
  4) 话术优化器：`tone`（单选：专业/接地气/权威，默认接地气）、`cta`（单选：关注/私信/加微信/报名，默认私信）
  5) 剪辑建议助手：`bgm_style`（单选：轻快/沉稳/热血，默认轻快）、`format`（单选：分镜/列表，默认分镜）
  6) 发布策略参谋：`best_slot`（单选：早间/午间/晚间，默认晚间）、`hashtags_count`（数字 3–10，默认5）

## 数据与存储（不存消息）
- 用户表：用户名、密码哈希、`dify_user_id`（只读）、状态、创建时间。
- 助手表：名称、图标、简介、`key_ref`（对应环境变量名）、是否显示、排序。
- 助手参数定义表：每助手的 1–2 个参数的键名、类型、文案、默认值、是否必填。
- 会话元信息表：用户、助手、`conversation_id`、会话名、创建/更新时间。
- 会话参数值表：按会话保存当前参数的值（切换会话时自动恢复）。

## Dify 接入
- 发送消息：带 `inputs`（上述 1–2 参数）、`query`、`conversation_id`、`user=dify_user_id`；流式返回提升体验。
- 会话列表与历史：按用户与会话分页拉取；与 Dify 网页内会话互不共享。

## 密钥管理（每助手一把）
- 在 Vercel 的环境变量里为 6 个助手分别配置 Dify Key；不放在数据库。
- 数据库仅存环境变量的“引用名”（`key_ref`），后端按此读取真实密钥调用 Dify。

## 部署步骤
- 注册并创建：Vercel、Supabase、Dify。
- Vercel：添加环境变量（6 个 Dify Key + 数据库连接）。
- Supabase：建表并手动录入 5 个测试账号与 6 个助手的参数定义与展示信息。
- Dify：在每个助手里声明并使用与数据库一致的变量名。
- 上线：推送代码到 Vercel，自动生成访问链接。

## 初始配置清单
- 测试账号：`xingyao_user01` ~ `xingyao_user05`（初始密码你可沿用示例或自定）；系统生成并写入各自 `dify_user_id`。
- 助手：6 个测试助手的名称与简介；参数定义按上表最简方案；`key_ref` 绑定各自环境变量名。
- 文案：品牌“星耀AI”；核心功能“老板/创始人IP打造，短视频获客”；各页面文案按你最终稿确认后实施。

## 时间表
- 第 1 天：登录与三栏骨架、单助手对话打通、流式显示、参数折叠区（1–2 项）。
- 第 2 天：多助手联动、会话管理、分页历史、错误提示与基本限流、文案确认与替换。
- 第 3 天：样式与细节优化、部署上线与联调、交付访问链接与测试账号清单。

## 验收标准
- 三栏联动正常；每助手的 1–2 参数可配置且生效；跨设备同账号能看到同一会话与历史。
- Dify Key 仅在后端环境变量；密码哈希存储；错误提示清晰，体验顺畅。

## 下一步
- 我开始实施上述方案；请将 6 个助手的最终参数键名与文案（如需改动）以及 5 个测试账号的初始密码定稿发给我；我将在 2–3 天内交付可访问的线上地址。